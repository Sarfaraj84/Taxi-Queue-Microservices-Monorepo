const GrpcServer = require('./server');
require('dotenv').config();

class Application {
  constructor() {
    this.grpcServer = new GrpcServer();
  }

  start() {
    this.grpcServer.start();
    
    // Handle graceful shutdown
    process.on('SIGINT', () => {
      console.log('Shutting down gracefully...');
      this.grpcServer.stop();
      process.exit(0);
    });

    process.on('SIGTERM', () => {
      console.log('Shutting down gracefully...');
      this.grpcServer.stop();
      process.exit(0);
    });
  }
}

// Start the application
const app = new Application();
app.start();

module.exports = Application;